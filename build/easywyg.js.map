{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","node_modules/browserify/node_modules/browser-resolve/empty.js","node_modules/virtual-dom/create-element.js","node_modules/virtual-dom/diff.js","node_modules/virtual-dom/h.js","node_modules/virtual-dom/index.js","node_modules/virtual-dom/node_modules/browser-split/index.js","node_modules/virtual-dom/node_modules/ev-store/index.js","node_modules/virtual-dom/node_modules/ev-store/node_modules/individual/index.js","node_modules/virtual-dom/node_modules/ev-store/node_modules/individual/one-version.js","node_modules/virtual-dom/node_modules/global/document.js","node_modules/virtual-dom/node_modules/is-object/index.js","node_modules/virtual-dom/node_modules/x-is-array/index.js","node_modules/virtual-dom/patch.js","node_modules/virtual-dom/vdom/apply-properties.js","node_modules/virtual-dom/vdom/create-element.js","node_modules/virtual-dom/vdom/dom-index.js","node_modules/virtual-dom/vdom/patch-op.js","node_modules/virtual-dom/vdom/patch.js","node_modules/virtual-dom/vdom/update-widget.js","node_modules/virtual-dom/virtual-hyperscript/hooks/ev-hook.js","node_modules/virtual-dom/virtual-hyperscript/hooks/soft-set-hook.js","node_modules/virtual-dom/virtual-hyperscript/index.js","node_modules/virtual-dom/virtual-hyperscript/parse-tag.js","node_modules/virtual-dom/vnode/handle-thunk.js","node_modules/virtual-dom/vnode/is-thunk.js","node_modules/virtual-dom/vnode/is-vhook.js","node_modules/virtual-dom/vnode/is-vnode.js","node_modules/virtual-dom/vnode/is-vtext.js","node_modules/virtual-dom/vnode/is-widget.js","node_modules/virtual-dom/vnode/version.js","node_modules/virtual-dom/vnode/vnode.js","node_modules/virtual-dom/vnode/vpatch.js","node_modules/virtual-dom/vnode/vtext.js","node_modules/virtual-dom/vtree/diff-props.js","node_modules/virtual-dom/vtree/diff.js","src/app/container.es6","src/app/easywyg.es6","src/app/entities.es6","src/app/entities/grid.es6","src/app/entities/grid_column.es6","src/app/entities/image.es6","src/app/entities/paragraph.es6","src/app/entities/root_container.es6","src/app/entities/substrate.es6","src/app/entity.es6","src/app/entity_map.es6","src/app/ext.es6","src/app/operation.es6","src/app/operation_map.es6","src/app/operations/delete.es6","src/app/operations/insert.es6","src/app/operations/move.es6","src/app/operations/replace.es6","src/app/operations/select.es6","src/app/operations/transfer.es6","src/app/operations/undo.es6","src/app/operations/update.es6","src/app/serialize.es6","src/app/serializer.es6","src/app/serializer_map.es6","src/app/serializers/delete.es6","src/app/serializers/insert.es6","src/app/serializers/move.es6","src/app/serializers/replace.es6","src/app/serializers/select.es6","src/app/serializers/transfer.es6","src/app/serializers/undo.es6","src/app/serializers/update.es6","src/app/ui/edit_zone.es6","src/app/view.es6","src/app/views/grid.es6","src/app/views/grid_column.es6","src/app/views/image.es6","src/app/views/paragraph.es6","src/app/views/root_container.es6","src/app/views/substrate.es6"],"names":[],"mappings":"AAAA;ACAA;;ACAA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACfA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AC3aA;;;;;;;;;;;;;;;;;;;;AAOE,oBAA8B;QAAlB,kEAAY,oBAAM;;;;0FACtB,YADsB;;AAG5B,UAAK,IAAL,GAAY;AACV,WAAS,KAAT;AACA,aAAS,EAAT;KAFF,CAH4B;;GAA9B;;;;gCASY,MAAM;AAChB,aAAO,KAAK,IAAL,CAAU,WAAV,CAAsB,IA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","file":"easywyg.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","","var createElement = require(\"./vdom/create-element.js\")\n\nmodule.exports = createElement\n","var diff = require(\"./vtree/diff.js\")\n\nmodule.exports = diff\n","var h = require(\"./virtual-hyperscript/index.js\")\n\nmodule.exports = h\n","var diff = require(\"./diff.js\")\r\nvar patch = require(\"./patch.js\")\r\nvar h = require(\"./h.js\")\r\nvar create = require(\"./create-element.js\")\r\nvar VNode = require('./vnode/vnode.js')\r\nvar VText = require('./vnode/vtext.js')\r\n\r\nmodule.exports = {\r\n    diff: diff,\r\n    patch: patch,\r\n    h: h,\r\n    create: create,\r\n    VNode: VNode,\r\n    VText: VText\r\n}\r\n","/*!\n * Cross-Browser Split 1.1.1\n * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>\n * Available under the MIT License\n * ECMAScript compliant, uniform cross-browser split method\n */\n\n/**\n * Splits a string into an array of strings using a regex or string separator. Matches of the\n * separator are not included in the result array. However, if `separator` is a regex that contains\n * capturing groups, backreferences are spliced into the result each time `separator` is matched.\n * Fixes browser bugs compared to the native `String.prototype.split` and can be used reliably\n * cross-browser.\n * @param {String} str String to split.\n * @param {RegExp|String} separator Regex or string to use for separating the string.\n * @param {Number} [limit] Maximum number of items to include in the result array.\n * @returns {Array} Array of substrings.\n * @example\n *\n * // Basic use\n * split('a b c d', ' ');\n * // -> ['a', 'b', 'c', 'd']\n *\n * // With limit\n * split('a b c d', ' ', 2);\n * // -> ['a', 'b']\n *\n * // Backreferences in result array\n * split('..word1 word2..', /([a-z]+)(\\d+)/i);\n * // -> ['..', 'word', '1', ' ', 'word', '2', '..']\n */\nmodule.exports = (function split(undef) {\n\n  var nativeSplit = String.prototype.split,\n    compliantExecNpcg = /()??/.exec(\"\")[1] === undef,\n    // NPCG: nonparticipating capturing group\n    self;\n\n  self = function(str, separator, limit) {\n    // If `separator` is not a regex, use `nativeSplit`\n    if (Object.prototype.toString.call(separator) !== \"[object RegExp]\") {\n      return nativeSplit.call(str, separator, limit);\n    }\n    var output = [],\n      flags = (separator.ignoreCase ? \"i\" : \"\") + (separator.multiline ? \"m\" : \"\") + (separator.extended ? \"x\" : \"\") + // Proposed for ES6\n      (separator.sticky ? \"y\" : \"\"),\n      // Firefox 3+\n      lastLastIndex = 0,\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      separator = new RegExp(separator.source, flags + \"g\"),\n      separator2, match, lastIndex, lastLength;\n    str += \"\"; // Type-convert\n    if (!compliantExecNpcg) {\n      // Doesn't need flags gy, but they don't hurt\n      separator2 = new RegExp(\"^\" + separator.source + \"$(?!\\\\s)\", flags);\n    }\n    /* Values for `limit`, per the spec:\n     * If undefined: 4294967295 // Math.pow(2, 32) - 1\n     * If 0, Infinity, or NaN: 0\n     * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n     * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n     * If other: Type-convert, then use the above rules\n     */\n    limit = limit === undef ? -1 >>> 0 : // Math.pow(2, 32) - 1\n    limit >>> 0; // ToUint32(limit)\n    while (match = separator.exec(str)) {\n      // `separator.lastIndex` is not reliable cross-browser\n      lastIndex = match.index + match[0].length;\n      if (lastIndex > lastLastIndex) {\n        output.push(str.slice(lastLastIndex, match.index));\n        // Fix browsers whose `exec` methods don't consistently return `undefined` for\n        // nonparticipating capturing groups\n        if (!compliantExecNpcg && match.length > 1) {\n          match[0].replace(separator2, function() {\n            for (var i = 1; i < arguments.length - 2; i++) {\n              if (arguments[i] === undef) {\n                match[i] = undef;\n              }\n            }\n          });\n        }\n        if (match.length > 1 && match.index < str.length) {\n          Array.prototype.push.apply(output, match.slice(1));\n        }\n        lastLength = match[0].length;\n        lastLastIndex = lastIndex;\n        if (output.length >= limit) {\n          break;\n        }\n      }\n      if (separator.lastIndex === match.index) {\n        separator.lastIndex++; // Avoid an infinite loop\n      }\n    }\n    if (lastLastIndex === str.length) {\n      if (lastLength || !separator.test(\"\")) {\n        output.push(\"\");\n      }\n    } else {\n      output.push(str.slice(lastLastIndex));\n    }\n    return output.length > limit ? output.slice(0, limit) : output;\n  };\n\n  return self;\n})();\n","'use strict';\n\nvar OneVersionConstraint = require('individual/one-version');\n\nvar MY_VERSION = '7';\nOneVersionConstraint('ev-store', MY_VERSION);\n\nvar hashKey = '__EV_STORE_KEY@' + MY_VERSION;\n\nmodule.exports = EvStore;\n\nfunction EvStore(elem) {\n    var hash = elem[hashKey];\n\n    if (!hash) {\n        hash = elem[hashKey] = {};\n    }\n\n    return hash;\n}\n","'use strict';\n\n/*global window, global*/\n\nvar root = typeof window !== 'undefined' ?\n    window : typeof global !== 'undefined' ?\n    global : {};\n\nmodule.exports = Individual;\n\nfunction Individual(key, value) {\n    if (key in root) {\n        return root[key];\n    }\n\n    root[key] = value;\n\n    return value;\n}\n","'use strict';\n\nvar Individual = require('./index.js');\n\nmodule.exports = OneVersion;\n\nfunction OneVersion(moduleName, version, defaultValue) {\n    var key = '__INDIVIDUAL_ONE_VERSION_' + moduleName;\n    var enforceKey = key + '_ENFORCE_SINGLETON';\n\n    var versionValue = Individual(enforceKey, version);\n\n    if (versionValue !== version) {\n        throw new Error('Can only have one copy of ' +\n            moduleName + '.\\n' +\n            'You already have version ' + versionValue +\n            ' installed.\\n' +\n            'This means you cannot install version ' + version);\n    }\n\n    return Individual(key, defaultValue);\n}\n","var topLevel = typeof global !== 'undefined' ? global :\n    typeof window !== 'undefined' ? window : {}\nvar minDoc = require('min-document');\n\nif (typeof document !== 'undefined') {\n    module.exports = document;\n} else {\n    var doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n    if (!doccy) {\n        doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n    }\n\n    module.exports = doccy;\n}\n","\"use strict\";\n\nmodule.exports = function isObject(x) {\n\treturn typeof x === \"object\" && x !== null;\n};\n","var nativeIsArray = Array.isArray\nvar toString = Object.prototype.toString\n\nmodule.exports = nativeIsArray || isArray\n\nfunction isArray(obj) {\n    return toString.call(obj) === \"[object Array]\"\n}\n","var patch = require(\"./vdom/patch.js\")\n\nmodule.exports = patch\n","var isObject = require(\"is-object\")\nvar isHook = require(\"../vnode/is-vhook.js\")\n\nmodule.exports = applyProperties\n\nfunction applyProperties(node, props, previous) {\n    for (var propName in props) {\n        var propValue = props[propName]\n\n        if (propValue === undefined) {\n            removeProperty(node, propName, propValue, previous);\n        } else if (isHook(propValue)) {\n            removeProperty(node, propName, propValue, previous)\n            if (propValue.hook) {\n                propValue.hook(node,\n                    propName,\n                    previous ? previous[propName] : undefined)\n            }\n        } else {\n            if (isObject(propValue)) {\n                patchObject(node, props, previous, propName, propValue);\n            } else {\n                node[propName] = propValue\n            }\n        }\n    }\n}\n\nfunction removeProperty(node, propName, propValue, previous) {\n    if (previous) {\n        var previousValue = previous[propName]\n\n        if (!isHook(previousValue)) {\n            if (propName === \"attributes\") {\n                for (var attrName in previousValue) {\n                    node.removeAttribute(attrName)\n                }\n            } else if (propName === \"style\") {\n                for (var i in previousValue) {\n                    node.style[i] = \"\"\n                }\n            } else if (typeof previousValue === \"string\") {\n                node[propName] = \"\"\n            } else {\n                node[propName] = null\n            }\n        } else if (previousValue.unhook) {\n            previousValue.unhook(node, propName, propValue)\n        }\n    }\n}\n\nfunction patchObject(node, props, previous, propName, propValue) {\n    var previousValue = previous ? previous[propName] : undefined\n\n    // Set attributes\n    if (propName === \"attributes\") {\n        for (var attrName in propValue) {\n            var attrValue = propValue[attrName]\n\n            if (attrValue === undefined) {\n                node.removeAttribute(attrName)\n            } else {\n                node.setAttribute(attrName, attrValue)\n            }\n        }\n\n        return\n    }\n\n    if(previousValue && isObject(previousValue) &&\n        getPrototype(previousValue) !== getPrototype(propValue)) {\n        node[propName] = propValue\n        return\n    }\n\n    if (!isObject(node[propName])) {\n        node[propName] = {}\n    }\n\n    var replacer = propName === \"style\" ? \"\" : undefined\n\n    for (var k in propValue) {\n        var value = propValue[k]\n        node[propName][k] = (value === undefined) ? replacer : value\n    }\n}\n\nfunction getPrototype(value) {\n    if (Object.getPrototypeOf) {\n        return Object.getPrototypeOf(value)\n    } else if (value.__proto__) {\n        return value.__proto__\n    } else if (value.constructor) {\n        return value.constructor.prototype\n    }\n}\n","var document = require(\"global/document\")\n\nvar applyProperties = require(\"./apply-properties\")\n\nvar isVNode = require(\"../vnode/is-vnode.js\")\nvar isVText = require(\"../vnode/is-vtext.js\")\nvar isWidget = require(\"../vnode/is-widget.js\")\nvar handleThunk = require(\"../vnode/handle-thunk.js\")\n\nmodule.exports = createElement\n\nfunction createElement(vnode, opts) {\n    var doc = opts ? opts.document || document : document\n    var warn = opts ? opts.warn : null\n\n    vnode = handleThunk(vnode).a\n\n    if (isWidget(vnode)) {\n        return vnode.init()\n    } else if (isVText(vnode)) {\n        return doc.createTextNode(vnode.text)\n    } else if (!isVNode(vnode)) {\n        if (warn) {\n            warn(\"Item is not a valid virtual dom node\", vnode)\n        }\n        return null\n    }\n\n    var node = (vnode.namespace === null) ?\n        doc.createElement(vnode.tagName) :\n        doc.createElementNS(vnode.namespace, vnode.tagName)\n\n    var props = vnode.properties\n    applyProperties(node, props)\n\n    var children = vnode.children\n\n    for (var i = 0; i < children.length; i++) {\n        var childNode = createElement(children[i], opts)\n        if (childNode) {\n            node.appendChild(childNode)\n        }\n    }\n\n    return node\n}\n","// Maps a virtual DOM tree onto a real DOM tree in an efficient manner.\n// We don't want to read all of the DOM nodes in the tree so we use\n// the in-order tree indexing to eliminate recursion down certain branches.\n// We only recurse into a DOM node if we know that it contains a child of\n// interest.\n\nvar noChild = {}\n\nmodule.exports = domIndex\n\nfunction domIndex(rootNode, tree, indices, nodes) {\n    if (!indices || indices.length === 0) {\n        return {}\n    } else {\n        indices.sort(ascending)\n        return recurse(rootNode, tree, indices, nodes, 0)\n    }\n}\n\nfunction recurse(rootNode, tree, indices, nodes, rootIndex) {\n    nodes = nodes || {}\n\n\n    if (rootNode) {\n        if (indexInRange(indices, rootIndex, rootIndex)) {\n            nodes[rootIndex] = rootNode\n        }\n\n        var vChildren = tree.children\n\n        if (vChildren) {\n\n            var childNodes = rootNode.childNodes\n\n            for (var i = 0; i < tree.children.length; i++) {\n                rootIndex += 1\n\n                var vChild = vChildren[i] || noChild\n                var nextIndex = rootIndex + (vChild.count || 0)\n\n                // skip recursion down the tree if there are no nodes down here\n                if (indexInRange(indices, rootIndex, nextIndex)) {\n                    recurse(childNodes[i], vChild, indices, nodes, rootIndex)\n                }\n\n                rootIndex = nextIndex\n            }\n        }\n    }\n\n    return nodes\n}\n\n// Binary search for an index in the interval [left, right]\nfunction indexInRange(indices, left, right) {\n    if (indices.length === 0) {\n        return false\n    }\n\n    var minIndex = 0\n    var maxIndex = indices.length - 1\n    var currentIndex\n    var currentItem\n\n    while (minIndex <= maxIndex) {\n        currentIndex = ((maxIndex + minIndex) / 2) >> 0\n        currentItem = indices[currentIndex]\n\n        if (minIndex === maxIndex) {\n            return currentItem >= left && currentItem <= right\n        } else if (currentItem < left) {\n            minIndex = currentIndex + 1\n        } else  if (currentItem > right) {\n            maxIndex = currentIndex - 1\n        } else {\n            return true\n        }\n    }\n\n    return false;\n}\n\nfunction ascending(a, b) {\n    return a > b ? 1 : -1\n}\n","var applyProperties = require(\"./apply-properties\")\n\nvar isWidget = require(\"../vnode/is-widget.js\")\nvar VPatch = require(\"../vnode/vpatch.js\")\n\nvar updateWidget = require(\"./update-widget\")\n\nmodule.exports = applyPatch\n\nfunction applyPatch(vpatch, domNode, renderOptions) {\n    var type = vpatch.type\n    var vNode = vpatch.vNode\n    var patch = vpatch.patch\n\n    switch (type) {\n        case VPatch.REMOVE:\n            return removeNode(domNode, vNode)\n        case VPatch.INSERT:\n            return insertNode(domNode, patch, renderOptions)\n        case VPatch.VTEXT:\n            return stringPatch(domNode, vNode, patch, renderOptions)\n        case VPatch.WIDGET:\n            return widgetPatch(domNode, vNode, patch, renderOptions)\n        case VPatch.VNODE:\n            return vNodePatch(domNode, vNode, patch, renderOptions)\n        case VPatch.ORDER:\n            reorderChildren(domNode, patch)\n            return domNode\n        case VPatch.PROPS:\n            applyProperties(domNode, patch, vNode.properties)\n            return domNode\n        case VPatch.THUNK:\n            return replaceRoot(domNode,\n                renderOptions.patch(domNode, patch, renderOptions))\n        default:\n            return domNode\n    }\n}\n\nfunction removeNode(domNode, vNode) {\n    var parentNode = domNode.parentNode\n\n    if (parentNode) {\n        parentNode.removeChild(domNode)\n    }\n\n    destroyWidget(domNode, vNode);\n\n    return null\n}\n\nfunction insertNode(parentNode, vNode, renderOptions) {\n    var newNode = renderOptions.render(vNode, renderOptions)\n\n    if (parentNode) {\n        parentNode.appendChild(newNode)\n    }\n\n    return parentNode\n}\n\nfunction stringPatch(domNode, leftVNode, vText, renderOptions) {\n    var newNode\n\n    if (domNode.nodeType === 3) {\n        domNode.replaceData(0, domNode.length, vText.text)\n        newNode = domNode\n    } else {\n        var parentNode = domNode.parentNode\n        newNode = renderOptions.render(vText, renderOptions)\n\n        if (parentNode && newNode !== domNode) {\n            parentNode.replaceChild(newNode, domNode)\n        }\n    }\n\n    return newNode\n}\n\nfunction widgetPatch(domNode, leftVNode, widget, renderOptions) {\n    var updating = updateWidget(leftVNode, widget)\n    var newNode\n\n    if (updating) {\n        newNode = widget.update(leftVNode, domNode) || domNode\n    } else {\n        newNode = renderOptions.render(widget, renderOptions)\n    }\n\n    var parentNode = domNode.parentNode\n\n    if (parentNode && newNode !== domNode) {\n        parentNode.replaceChild(newNode, domNode)\n    }\n\n    if (!updating) {\n        destroyWidget(domNode, leftVNode)\n    }\n\n    return newNode\n}\n\nfunction vNodePatch(domNode, leftVNode, vNode, renderOptions) {\n    var parentNode = domNode.parentNode\n    var newNode = renderOptions.render(vNode, renderOptions)\n\n    if (parentNode && newNode !== domNode) {\n        parentNode.replaceChild(newNode, domNode)\n    }\n\n    return newNode\n}\n\nfunction destroyWidget(domNode, w) {\n    if (typeof w.destroy === \"function\" && isWidget(w)) {\n        w.destroy(domNode)\n    }\n}\n\nfunction reorderChildren(domNode, moves) {\n    var childNodes = domNode.childNodes\n    var keyMap = {}\n    var node\n    var remove\n    var insert\n\n    for (var i = 0; i < moves.removes.length; i++) {\n        remove = moves.removes[i]\n        node = childNodes[remove.from]\n        if (remove.key) {\n            keyMap[remove.key] = node\n        }\n        domNode.removeChild(node)\n    }\n\n    var length = childNodes.length\n    for (var j = 0; j < moves.inserts.length; j++) {\n        insert = moves.inserts[j]\n        node = keyMap[insert.key]\n        // this is the weirdest bug i've ever seen in webkit\n        domNode.insertBefore(node, insert.to >= length++ ? null : childNodes[insert.to])\n    }\n}\n\nfunction replaceRoot(oldRoot, newRoot) {\n    if (oldRoot && newRoot && oldRoot !== newRoot && oldRoot.parentNode) {\n        oldRoot.parentNode.replaceChild(newRoot, oldRoot)\n    }\n\n    return newRoot;\n}\n","var document = require(\"global/document\")\nvar isArray = require(\"x-is-array\")\n\nvar render = require(\"./create-element\")\nvar domIndex = require(\"./dom-index\")\nvar patchOp = require(\"./patch-op\")\nmodule.exports = patch\n\nfunction patch(rootNode, patches, renderOptions) {\n    renderOptions = renderOptions || {}\n    renderOptions.patch = renderOptions.patch && renderOptions.patch !== patch\n        ? renderOptions.patch\n        : patchRecursive\n    renderOptions.render = renderOptions.render || render\n\n    return renderOptions.patch(rootNode, patches, renderOptions)\n}\n\nfunction patchRecursive(rootNode, patches, renderOptions) {\n    var indices = patchIndices(patches)\n\n    if (indices.length === 0) {\n        return rootNode\n    }\n\n    var index = domIndex(rootNode, patches.a, indices)\n    var ownerDocument = rootNode.ownerDocument\n\n    if (!renderOptions.document && ownerDocument !== document) {\n        renderOptions.document = ownerDocument\n    }\n\n    for (var i = 0; i < indices.length; i++) {\n        var nodeIndex = indices[i]\n        rootNode = applyPatch(rootNode,\n            index[nodeIndex],\n            patches[nodeIndex],\n            renderOptions)\n    }\n\n    return rootNode\n}\n\nfunction applyPatch(rootNode, domNode, patchList, renderOptions) {\n    if (!domNode) {\n        return rootNode\n    }\n\n    var newNode\n\n    if (isArray(patchList)) {\n        for (var i = 0; i < patchList.length; i++) {\n            newNode = patchOp(patchList[i], domNode, renderOptions)\n\n            if (domNode === rootNode) {\n                rootNode = newNode\n            }\n        }\n    } else {\n        newNode = patchOp(patchList, domNode, renderOptions)\n\n        if (domNode === rootNode) {\n            rootNode = newNode\n        }\n    }\n\n    return rootNode\n}\n\nfunction patchIndices(patches) {\n    var indices = []\n\n    for (var key in patches) {\n        if (key !== \"a\") {\n            indices.push(Number(key))\n        }\n    }\n\n    return indices\n}\n","var isWidget = require(\"../vnode/is-widget.js\")\n\nmodule.exports = updateWidget\n\nfunction updateWidget(a, b) {\n    if (isWidget(a) && isWidget(b)) {\n        if (\"name\" in a && \"name\" in b) {\n            return a.id === b.id\n        } else {\n            return a.init === b.init\n        }\n    }\n\n    return false\n}\n","'use strict';\n\nvar EvStore = require('ev-store');\n\nmodule.exports = EvHook;\n\nfunction EvHook(value) {\n    if (!(this instanceof EvHook)) {\n        return new EvHook(value);\n    }\n\n    this.value = value;\n}\n\nEvHook.prototype.hook = function (node, propertyName) {\n    var es = EvStore(node);\n    var propName = propertyName.substr(3);\n\n    es[propName] = this.value;\n};\n\nEvHook.prototype.unhook = function(node, propertyName) {\n    var es = EvStore(node);\n    var propName = propertyName.substr(3);\n\n    es[propName] = undefined;\n};\n","'use strict';\n\nmodule.exports = SoftSetHook;\n\nfunction SoftSetHook(value) {\n    if (!(this instanceof SoftSetHook)) {\n        return new SoftSetHook(value);\n    }\n\n    this.value = value;\n}\n\nSoftSetHook.prototype.hook = function (node, propertyName) {\n    if (node[propertyName] !== this.value) {\n        node[propertyName] = this.value;\n    }\n};\n","'use strict';\n\nvar isArray = require('x-is-array');\n\nvar VNode = require('../vnode/vnode.js');\nvar VText = require('../vnode/vtext.js');\nvar isVNode = require('../vnode/is-vnode');\nvar isVText = require('../vnode/is-vtext');\nvar isWidget = require('../vnode/is-widget');\nvar isHook = require('../vnode/is-vhook');\nvar isVThunk = require('../vnode/is-thunk');\n\nvar parseTag = require('./parse-tag.js');\nvar softSetHook = require('./hooks/soft-set-hook.js');\nvar evHook = require('./hooks/ev-hook.js');\n\nmodule.exports = h;\n\nfunction h(tagName, properties, children) {\n    var childNodes = [];\n    var tag, props, key, namespace;\n\n    if (!children && isChildren(properties)) {\n        children = properties;\n        props = {};\n    }\n\n    props = props || properties || {};\n    tag = parseTag(tagName, props);\n\n    // support keys\n    if (props.hasOwnProperty('key')) {\n        key = props.key;\n        props.key = undefined;\n    }\n\n    // support namespace\n    if (props.hasOwnProperty('namespace')) {\n        namespace = props.namespace;\n        props.namespace = undefined;\n    }\n\n    // fix cursor bug\n    if (tag === 'INPUT' &&\n        !namespace &&\n        props.hasOwnProperty('value') &&\n        props.value !== undefined &&\n        !isHook(props.value)\n    ) {\n        props.value = softSetHook(props.value);\n    }\n\n    transformProperties(props);\n\n    if (children !== undefined && children !== null) {\n        addChild(children, childNodes, tag, props);\n    }\n\n\n    return new VNode(tag, props, childNodes, key, namespace);\n}\n\nfunction addChild(c, childNodes, tag, props) {\n    if (typeof c === 'string') {\n        childNodes.push(new VText(c));\n    } else if (typeof c === 'number') {\n        childNodes.push(new VText(String(c)));\n    } else if (isChild(c)) {\n        childNodes.push(c);\n    } else if (isArray(c)) {\n        for (var i = 0; i < c.length; i++) {\n            addChild(c[i], childNodes, tag, props);\n        }\n    } else if (c === null || c === undefined) {\n        return;\n    } else {\n        throw UnexpectedVirtualElement({\n            foreignObject: c,\n            parentVnode: {\n                tagName: tag,\n                properties: props\n            }\n        });\n    }\n}\n\nfunction transformProperties(props) {\n    for (var propName in props) {\n        if (props.hasOwnProperty(propName)) {\n            var value = props[propName];\n\n            if (isHook(value)) {\n                continue;\n            }\n\n            if (propName.substr(0, 3) === 'ev-') {\n                // add ev-foo support\n                props[propName] = evHook(value);\n            }\n        }\n    }\n}\n\nfunction isChild(x) {\n    return isVNode(x) || isVText(x) || isWidget(x) || isVThunk(x);\n}\n\nfunction isChildren(x) {\n    return typeof x === 'string' || isArray(x) || isChild(x);\n}\n\nfunction UnexpectedVirtualElement(data) {\n    var err = new Error();\n\n    err.type = 'virtual-hyperscript.unexpected.virtual-element';\n    err.message = 'Unexpected virtual child passed to h().\\n' +\n        'Expected a VNode / Vthunk / VWidget / string but:\\n' +\n        'got:\\n' +\n        errorString(data.foreignObject) +\n        '.\\n' +\n        'The parent vnode is:\\n' +\n        errorString(data.parentVnode)\n        '\\n' +\n        'Suggested fix: change your `h(..., [ ... ])` callsite.';\n    err.foreignObject = data.foreignObject;\n    err.parentVnode = data.parentVnode;\n\n    return err;\n}\n\nfunction errorString(obj) {\n    try {\n        return JSON.stringify(obj, null, '    ');\n    } catch (e) {\n        return String(obj);\n    }\n}\n","'use strict';\n\nvar split = require('browser-split');\n\nvar classIdSplit = /([\\.#]?[a-zA-Z0-9\\u007F-\\uFFFF_:-]+)/;\nvar notClassId = /^\\.|#/;\n\nmodule.exports = parseTag;\n\nfunction parseTag(tag, props) {\n    if (!tag) {\n        return 'DIV';\n    }\n\n    var noId = !(props.hasOwnProperty('id'));\n\n    var tagParts = split(tag, classIdSplit);\n    var tagName = null;\n\n    if (notClassId.test(tagParts[1])) {\n        tagName = 'DIV';\n    }\n\n    var classes, part, type, i;\n\n    for (i = 0; i < tagParts.length; i++) {\n        part = tagParts[i];\n\n        if (!part) {\n            continue;\n        }\n\n        type = part.charAt(0);\n\n        if (!tagName) {\n            tagName = part;\n        } else if (type === '.') {\n            classes = classes || [];\n            classes.push(part.substring(1, part.length));\n        } else if (type === '#' && noId) {\n            props.id = part.substring(1, part.length);\n        }\n    }\n\n    if (classes) {\n        if (props.className) {\n            classes.push(props.className);\n        }\n\n        props.className = classes.join(' ');\n    }\n\n    return props.namespace ? tagName : tagName.toUpperCase();\n}\n","var isVNode = require(\"./is-vnode\")\nvar isVText = require(\"./is-vtext\")\nvar isWidget = require(\"./is-widget\")\nvar isThunk = require(\"./is-thunk\")\n\nmodule.exports = handleThunk\n\nfunction handleThunk(a, b) {\n    var renderedA = a\n    var renderedB = b\n\n    if (isThunk(b)) {\n        renderedB = renderThunk(b, a)\n    }\n\n    if (isThunk(a)) {\n        renderedA = renderThunk(a, null)\n    }\n\n    return {\n        a: renderedA,\n        b: renderedB\n    }\n}\n\nfunction renderThunk(thunk, previous) {\n    var renderedThunk = thunk.vnode\n\n    if (!renderedThunk) {\n        renderedThunk = thunk.vnode = thunk.render(previous)\n    }\n\n    if (!(isVNode(renderedThunk) ||\n            isVText(renderedThunk) ||\n            isWidget(renderedThunk))) {\n        throw new Error(\"thunk did not return a valid node\");\n    }\n\n    return renderedThunk\n}\n","module.exports = isThunk\r\n\r\nfunction isThunk(t) {\r\n    return t && t.type === \"Thunk\"\r\n}\r\n","module.exports = isHook\n\nfunction isHook(hook) {\n    return hook &&\n      (typeof hook.hook === \"function\" && !hook.hasOwnProperty(\"hook\") ||\n       typeof hook.unhook === \"function\" && !hook.hasOwnProperty(\"unhook\"))\n}\n","var version = require(\"./version\")\n\nmodule.exports = isVirtualNode\n\nfunction isVirtualNode(x) {\n    return x && x.type === \"VirtualNode\" && x.version === version\n}\n","var version = require(\"./version\")\n\nmodule.exports = isVirtualText\n\nfunction isVirtualText(x) {\n    return x && x.type === \"VirtualText\" && x.version === version\n}\n","module.exports = isWidget\n\nfunction isWidget(w) {\n    return w && w.type === \"Widget\"\n}\n","module.exports = \"2\"\n","var version = require(\"./version\")\nvar isVNode = require(\"./is-vnode\")\nvar isWidget = require(\"./is-widget\")\nvar isThunk = require(\"./is-thunk\")\nvar isVHook = require(\"./is-vhook\")\n\nmodule.exports = VirtualNode\n\nvar noProperties = {}\nvar noChildren = []\n\nfunction VirtualNode(tagName, properties, children, key, namespace) {\n    this.tagName = tagName\n    this.properties = properties || noProperties\n    this.children = children || noChildren\n    this.key = key != null ? String(key) : undefined\n    this.namespace = (typeof namespace === \"string\") ? namespace : null\n\n    var count = (children && children.length) || 0\n    var descendants = 0\n    var hasWidgets = false\n    var hasThunks = false\n    var descendantHooks = false\n    var hooks\n\n    for (var propName in properties) {\n        if (properties.hasOwnProperty(propName)) {\n            var property = properties[propName]\n            if (isVHook(property) && property.unhook) {\n                if (!hooks) {\n                    hooks = {}\n                }\n\n                hooks[propName] = property\n            }\n        }\n    }\n\n    for (var i = 0; i < count; i++) {\n        var child = children[i]\n        if (isVNode(child)) {\n            descendants += child.count || 0\n\n            if (!hasWidgets && child.hasWidgets) {\n                hasWidgets = true\n            }\n\n            if (!hasThunks && child.hasThunks) {\n                hasThunks = true\n            }\n\n            if (!descendantHooks && (child.hooks || child.descendantHooks)) {\n                descendantHooks = true\n            }\n        } else if (!hasWidgets && isWidget(child)) {\n            if (typeof child.destroy === \"function\") {\n                hasWidgets = true\n            }\n        } else if (!hasThunks && isThunk(child)) {\n            hasThunks = true;\n        }\n    }\n\n    this.count = count + descendants\n    this.hasWidgets = hasWidgets\n    this.hasThunks = hasThunks\n    this.hooks = hooks\n    this.descendantHooks = descendantHooks\n}\n\nVirtualNode.prototype.version = version\nVirtualNode.prototype.type = \"VirtualNode\"\n","var version = require(\"./version\")\n\nVirtualPatch.NONE = 0\nVirtualPatch.VTEXT = 1\nVirtualPatch.VNODE = 2\nVirtualPatch.WIDGET = 3\nVirtualPatch.PROPS = 4\nVirtualPatch.ORDER = 5\nVirtualPatch.INSERT = 6\nVirtualPatch.REMOVE = 7\nVirtualPatch.THUNK = 8\n\nmodule.exports = VirtualPatch\n\nfunction VirtualPatch(type, vNode, patch) {\n    this.type = Number(type)\n    this.vNode = vNode\n    this.patch = patch\n}\n\nVirtualPatch.prototype.version = version\nVirtualPatch.prototype.type = \"VirtualPatch\"\n","var version = require(\"./version\")\n\nmodule.exports = VirtualText\n\nfunction VirtualText(text) {\n    this.text = String(text)\n}\n\nVirtualText.prototype.version = version\nVirtualText.prototype.type = \"VirtualText\"\n","var isObject = require(\"is-object\")\nvar isHook = require(\"../vnode/is-vhook\")\n\nmodule.exports = diffProps\n\nfunction diffProps(a, b) {\n    var diff\n\n    for (var aKey in a) {\n        if (!(aKey in b)) {\n            diff = diff || {}\n            diff[aKey] = undefined\n        }\n\n        var aValue = a[aKey]\n        var bValue = b[aKey]\n\n        if (aValue === bValue) {\n            continue\n        } else if (isObject(aValue) && isObject(bValue)) {\n            if (getPrototype(bValue) !== getPrototype(aValue)) {\n                diff = diff || {}\n                diff[aKey] = bValue\n            } else if (isHook(bValue)) {\n                 diff = diff || {}\n                 diff[aKey] = bValue\n            } else {\n                var objectDiff = diffProps(aValue, bValue)\n                if (objectDiff) {\n                    diff = diff || {}\n                    diff[aKey] = objectDiff\n                }\n            }\n        } else {\n            diff = diff || {}\n            diff[aKey] = bValue\n        }\n    }\n\n    for (var bKey in b) {\n        if (!(bKey in a)) {\n            diff = diff || {}\n            diff[bKey] = b[bKey]\n        }\n    }\n\n    return diff\n}\n\nfunction getPrototype(value) {\n  if (Object.getPrototypeOf) {\n    return Object.getPrototypeOf(value)\n  } else if (value.__proto__) {\n    return value.__proto__\n  } else if (value.constructor) {\n    return value.constructor.prototype\n  }\n}\n","var isArray = require(\"x-is-array\")\n\nvar VPatch = require(\"../vnode/vpatch\")\nvar isVNode = require(\"../vnode/is-vnode\")\nvar isVText = require(\"../vnode/is-vtext\")\nvar isWidget = require(\"../vnode/is-widget\")\nvar isThunk = require(\"../vnode/is-thunk\")\nvar handleThunk = require(\"../vnode/handle-thunk\")\n\nvar diffProps = require(\"./diff-props\")\n\nmodule.exports = diff\n\nfunction diff(a, b) {\n    var patch = { a: a }\n    walk(a, b, patch, 0)\n    return patch\n}\n\nfunction walk(a, b, patch, index) {\n    if (a === b) {\n        return\n    }\n\n    var apply = patch[index]\n    var applyClear = false\n\n    if (isThunk(a) || isThunk(b)) {\n        thunks(a, b, patch, index)\n    } else if (b == null) {\n\n        // If a is a widget we will add a remove patch for it\n        // Otherwise any child widgets/hooks must be destroyed.\n        // This prevents adding two remove patches for a widget.\n        if (!isWidget(a)) {\n            clearState(a, patch, index)\n            apply = patch[index]\n        }\n\n        apply = appendPatch(apply, new VPatch(VPatch.REMOVE, a, b))\n    } else if (isVNode(b)) {\n        if (isVNode(a)) {\n            if (a.tagName === b.tagName &&\n                a.namespace === b.namespace &&\n                a.key === b.key) {\n                var propsPatch = diffProps(a.properties, b.properties)\n                if (propsPatch) {\n                    apply = appendPatch(apply,\n                        new VPatch(VPatch.PROPS, a, propsPatch))\n                }\n                apply = diffChildren(a, b, patch, apply, index)\n            } else {\n                apply = appendPatch(apply, new VPatch(VPatch.VNODE, a, b))\n                applyClear = true\n            }\n        } else {\n            apply = appendPatch(apply, new VPatch(VPatch.VNODE, a, b))\n            applyClear = true\n        }\n    } else if (isVText(b)) {\n        if (!isVText(a)) {\n            apply = appendPatch(apply, new VPatch(VPatch.VTEXT, a, b))\n            applyClear = true\n        } else if (a.text !== b.text) {\n            apply = appendPatch(apply, new VPatch(VPatch.VTEXT, a, b))\n        }\n    } else if (isWidget(b)) {\n        if (!isWidget(a)) {\n            applyClear = true\n        }\n\n        apply = appendPatch(apply, new VPatch(VPatch.WIDGET, a, b))\n    }\n\n    if (apply) {\n        patch[index] = apply\n    }\n\n    if (applyClear) {\n        clearState(a, patch, index)\n    }\n}\n\nfunction diffChildren(a, b, patch, apply, index) {\n    var aChildren = a.children\n    var orderedSet = reorder(aChildren, b.children)\n    var bChildren = orderedSet.children\n\n    var aLen = aChildren.length\n    var bLen = bChildren.length\n    var len = aLen > bLen ? aLen : bLen\n\n    for (var i = 0; i < len; i++) {\n        var leftNode = aChildren[i]\n        var rightNode = bChildren[i]\n        index += 1\n\n        if (!leftNode) {\n            if (rightNode) {\n                // Excess nodes in b need to be added\n                apply = appendPatch(apply,\n                    new VPatch(VPatch.INSERT, null, rightNode))\n            }\n        } else {\n            walk(leftNode, rightNode, patch, index)\n        }\n\n        if (isVNode(leftNode) && leftNode.count) {\n            index += leftNode.count\n        }\n    }\n\n    if (orderedSet.moves) {\n        // Reorder nodes last\n        apply = appendPatch(apply, new VPatch(\n            VPatch.ORDER,\n            a,\n            orderedSet.moves\n        ))\n    }\n\n    return apply\n}\n\nfunction clearState(vNode, patch, index) {\n    // TODO: Make this a single walk, not two\n    unhook(vNode, patch, index)\n    destroyWidgets(vNode, patch, index)\n}\n\n// Patch records for all destroyed widgets must be added because we need\n// a DOM node reference for the destroy function\nfunction destroyWidgets(vNode, patch, index) {\n    if (isWidget(vNode)) {\n        if (typeof vNode.destroy === \"function\") {\n            patch[index] = appendPatch(\n                patch[index],\n                new VPatch(VPatch.REMOVE, vNode, null)\n            )\n        }\n    } else if (isVNode(vNode) && (vNode.hasWidgets || vNode.hasThunks)) {\n        var children = vNode.children\n        var len = children.length\n        for (var i = 0; i < len; i++) {\n            var child = children[i]\n            index += 1\n\n            destroyWidgets(child, patch, index)\n\n            if (isVNode(child) && child.count) {\n                index += child.count\n            }\n        }\n    } else if (isThunk(vNode)) {\n        thunks(vNode, null, patch, index)\n    }\n}\n\n// Create a sub-patch for thunks\nfunction thunks(a, b, patch, index) {\n    var nodes = handleThunk(a, b)\n    var thunkPatch = diff(nodes.a, nodes.b)\n    if (hasPatches(thunkPatch)) {\n        patch[index] = new VPatch(VPatch.THUNK, null, thunkPatch)\n    }\n}\n\nfunction hasPatches(patch) {\n    for (var index in patch) {\n        if (index !== \"a\") {\n            return true\n        }\n    }\n\n    return false\n}\n\n// Execute hooks when two nodes are identical\nfunction unhook(vNode, patch, index) {\n    if (isVNode(vNode)) {\n        if (vNode.hooks) {\n            patch[index] = appendPatch(\n                patch[index],\n                new VPatch(\n                    VPatch.PROPS,\n                    vNode,\n                    undefinedKeys(vNode.hooks)\n                )\n            )\n        }\n\n        if (vNode.descendantHooks || vNode.hasThunks) {\n            var children = vNode.children\n            var len = children.length\n            for (var i = 0; i < len; i++) {\n                var child = children[i]\n                index += 1\n\n                unhook(child, patch, index)\n\n                if (isVNode(child) && child.count) {\n                    index += child.count\n                }\n            }\n        }\n    } else if (isThunk(vNode)) {\n        thunks(vNode, null, patch, index)\n    }\n}\n\nfunction undefinedKeys(obj) {\n    var result = {}\n\n    for (var key in obj) {\n        result[key] = undefined\n    }\n\n    return result\n}\n\n// List diff, naive left to right reordering\nfunction reorder(aChildren, bChildren) {\n    // O(M) time, O(M) memory\n    var bChildIndex = keyIndex(bChildren)\n    var bKeys = bChildIndex.keys\n    var bFree = bChildIndex.free\n\n    if (bFree.length === bChildren.length) {\n        return {\n            children: bChildren,\n            moves: null\n        }\n    }\n\n    // O(N) time, O(N) memory\n    var aChildIndex = keyIndex(aChildren)\n    var aKeys = aChildIndex.keys\n    var aFree = aChildIndex.free\n\n    if (aFree.length === aChildren.length) {\n        return {\n            children: bChildren,\n            moves: null\n        }\n    }\n\n    // O(MAX(N, M)) memory\n    var newChildren = []\n\n    var freeIndex = 0\n    var freeCount = bFree.length\n    var deletedItems = 0\n\n    // Iterate through a and match a node in b\n    // O(N) time,\n    for (var i = 0 ; i < aChildren.length; i++) {\n        var aItem = aChildren[i]\n        var itemIndex\n\n        if (aItem.key) {\n            if (bKeys.hasOwnProperty(aItem.key)) {\n                // Match up the old keys\n                itemIndex = bKeys[aItem.key]\n                newChildren.push(bChildren[itemIndex])\n\n            } else {\n                // Remove old keyed items\n                itemIndex = i - deletedItems++\n                newChildren.push(null)\n            }\n        } else {\n            // Match the item in a with the next free item in b\n            if (freeIndex < freeCount) {\n                itemIndex = bFree[freeIndex++]\n                newChildren.push(bChildren[itemIndex])\n            } else {\n                // There are no free items in b to match with\n                // the free items in a, so the extra free nodes\n                // are deleted.\n                itemIndex = i - deletedItems++\n                newChildren.push(null)\n            }\n        }\n    }\n\n    var lastFreeIndex = freeIndex >= bFree.length ?\n        bChildren.length :\n        bFree[freeIndex]\n\n    // Iterate through b and append any new keys\n    // O(M) time\n    for (var j = 0; j < bChildren.length; j++) {\n        var newItem = bChildren[j]\n\n        if (newItem.key) {\n            if (!aKeys.hasOwnProperty(newItem.key)) {\n                // Add any new keyed items\n                // We are adding new items to the end and then sorting them\n                // in place. In future we should insert new items in place.\n                newChildren.push(newItem)\n            }\n        } else if (j >= lastFreeIndex) {\n            // Add any leftover non-keyed items\n            newChildren.push(newItem)\n        }\n    }\n\n    var simulate = newChildren.slice()\n    var simulateIndex = 0\n    var removes = []\n    var inserts = []\n    var simulateItem\n\n    for (var k = 0; k < bChildren.length;) {\n        var wantedItem = bChildren[k]\n        simulateItem = simulate[simulateIndex]\n\n        // remove items\n        while (simulateItem === null && simulate.length) {\n            removes.push(remove(simulate, simulateIndex, null))\n            simulateItem = simulate[simulateIndex]\n        }\n\n        if (!simulateItem || simulateItem.key !== wantedItem.key) {\n            // if we need a key in this position...\n            if (wantedItem.key) {\n                if (simulateItem && simulateItem.key) {\n                    // if an insert doesn't put this key in place, it needs to move\n                    if (bKeys[simulateItem.key] !== k + 1) {\n                        removes.push(remove(simulate, simulateIndex, simulateItem.key))\n                        simulateItem = simulate[simulateIndex]\n                        // if the remove didn't put the wanted item in place, we need to insert it\n                        if (!simulateItem || simulateItem.key !== wantedItem.key) {\n                            inserts.push({key: wantedItem.key, to: k})\n                        }\n                        // items are matching, so skip ahead\n                        else {\n                            simulateIndex++\n                        }\n                    }\n                    else {\n                        inserts.push({key: wantedItem.key, to: k})\n                    }\n                }\n                else {\n                    inserts.push({key: wantedItem.key, to: k})\n                }\n                k++\n            }\n            // a key in simulate has no matching wanted key, remove it\n            else if (simulateItem && simulateItem.key) {\n                removes.push(remove(simulate, simulateIndex, simulateItem.key))\n            }\n        }\n        else {\n            simulateIndex++\n            k++\n        }\n    }\n\n    // remove all the remaining nodes from simulate\n    while(simulateIndex < simulate.length) {\n        simulateItem = simulate[simulateIndex]\n        removes.push(remove(simulate, simulateIndex, simulateItem && simulateItem.key))\n    }\n\n    // If the only moves we have are deletes then we can just\n    // let the delete patch remove these items.\n    if (removes.length === deletedItems && !inserts.length) {\n        return {\n            children: newChildren,\n            moves: null\n        }\n    }\n\n    return {\n        children: newChildren,\n        moves: {\n            removes: removes,\n            inserts: inserts\n        }\n    }\n}\n\nfunction remove(arr, index, key) {\n    arr.splice(index, 1)\n\n    return {\n        from: index,\n        key: key\n    }\n}\n\nfunction keyIndex(children) {\n    var keys = {}\n    var free = []\n    var length = children.length\n\n    for (var i = 0; i < length; i++) {\n        var child = children[i]\n\n        if (child.key) {\n            keys[child.key] = i\n        } else {\n            free.push(i)\n        }\n    }\n\n    return {\n        keys: keys,     // A hash of key name to index\n        free: free      // An array of unkeyed item indices\n    }\n}\n\nfunction appendPatch(apply, patch) {\n    if (apply) {\n        if (isArray(apply)) {\n            apply.push(patch)\n        } else {\n            apply = [apply, patch]\n        }\n\n        return apply\n    } else {\n        return patch\n    }\n}\n","import Entity from './entity.es6';\n\n// Контейнер. Контейнеру можно задать, какие типы Entity он может содержать.\n// Это нужно для того, чтобы в контейнер колонки грида нельзя было добавить другой\n// грид, например. Хотя мля, почему бы и нет?\n// Контейнер должен представлять собой элемент, который тоже можно отрендерить.\nexport default class extends Entity {\n  constructor(container = null) {\n    super(container);\n\n    this.opts = {\n      tag    : 'div',\n      attrs  : {}\n    };\n  }\n\n  appendChild(node) {\n    return this.node.appendChild(node);\n  }\n\n  get tag() {\n    return this.opts.tag\n  }\n}\n","'use strict';\n\n// Core extensions\nrequire('./ext.es6');\n\nimport EditZone from './ui/edit_zone.es6';\nimport Entities from './entities.es6';\nimport OperationMap from './operation_map.es6';\nimport Serialize from './serialize.es6';\n\nclass Easywyg {\n  constructor(el) {\n    this.el = el;\n    this.editZone = new EditZone();\n    this.entities = new Entities();\n\n    this.render();\n  }\n\n  render() {\n    this.editZone.render()\n  }\n\n  on(event) {\n\n  }\n\n  fire(event, ...args) {\n\n  }\n\n  operate(operationName, ...args) {\n    const operation = new OperationMap[operationName](...args);\n\n    this.fire('operate', operation);\n    const serializer = Serialize(operation);\n    //console.log(serializer.serialize());\n\n    // Откат операции\n    const result = operation.execute(this.entities);\n    operation.reverse(this.entities);\n\n    // ТУДУ: Результатом работы операции можно сделать специальный объект,\n    // который будет включать в себя ссылки на операцию и на результат выполнения операции.\n    return result;\n  }\n}\n\nexport default Easywyg;\n\nif (window) {\n  window.Easywyg = Easywyg;\n}\n","// An entities collection class\nexport default class {\n  constructor() {\n    // Массив инстансов классов Entity\n    this.entities = []\n  }\n\n  // Рендерим в html\n  // Тк юзаем virtual-dom, то при изменении состояния он сразу перерендеривает\n  // соответствующий кусок DOM. Нам походу не нужет этот метод ощпе.\n  render() {\n    this.entities.map((entity) => { entity.render() });\n    return this;\n  }\n}\n","//import Entity from '../entity.es6';\nimport ContainerEntity from '../container.es6';\nimport View from '../views/grid.es6';\n\n// A Grid Entity\nexport default class extends ContainerEntity {\n  constructor(container = null) {\n    super(container);\n\n    this.opts = {\n      attrs : {\n        class : 'easywyg-grid'\n      }\n    };\n\n    this.view = new View();\n  }\n\n  get type() {\n    return 'grid'\n  }\n}\n","import ContainerEntity from '../container.es6';\nimport View from '../views/grid_column.es6';\n\n// A Grid Column Entity\n// This is an container entity.\nexport default class extends ContainerEntity {\n  constructor(container = null) {\n    super(container);\n\n    this.view = new View;\n\n    this.opts = {\n      tag    : 'div',\n      attrs  : {\n        class: 'easywyg-grid-column'\n      },\n    };\n  }\n\n  get type() {\n    return 'grid_column'\n  }\n}\n","import Entity from '../entity.es6';\nimport View from '../views/image.es6';\n\n// A Image Entity\nexport default class extends Entity {\n  constructor(container = null) {\n    super(container);\n\n    this.opts = {\n      caption : '',\n      attrs   : {\n        figure: {\n          class: 'easywyg-figure'\n        },\n        img: {},\n        figcaption: {},\n        a: {}\n      },\n      markup  : {}\n    };\n\n    this.view = new View();\n  }\n\n  get type() {\n    return 'image'\n  }\n\n  get caption() {\n    return this.opts.caption\n  }\n\n  get markup() {\n    return this.opts.markup\n  }\n}\n","import Entity from '../entity.es6';\nimport View from '../views/paragraph.es6';\n\n// A Paragraph Entity\n// Note: Что делает этот класс? По-идее, он просто хранит в себе переданные\n// в него данные, и имеет надор методов для модификации этих данных.\nexport default class extends Entity {\n  constructor(container = null) {\n    super(container);\n\n    this.opts = {\n      tag    : 'p',\n      text   : '',\n      attrs  : {},\n      markup : {}\n    };\n\n    this.view = new View();\n  }\n\n  get type() {\n    return 'paragraph'\n  }\n\n  get text() {\n    return this.opts.text\n  }\n\n  get markup() {\n    return this.opts.markup\n  }\n\n  get tag() {\n    return this.opts.tag\n  }\n}\n","import ContainerEntity from '../container.es6';\nimport View from '../views/root_container.es6';\n\n// A Root Container Entity\nexport default class extends ContainerEntity {\n  constructor(container = null) {\n    super(container);\n\n    this.view = new View;\n    this.opts = {};\n  }\n\n  get type() {\n    return 'root_container'\n  }\n}\n","import ContainerEntity from '../container.es6';\nimport View from '../views/substrate.es6';\n\n// A Substrate Entity\n// This is an container entity!!!\nexport default class extends ContainerEntity {\n  constructor(container = null) {\n    super(container);\n\n    this.view = new View;\n\n    this.opts = {\n      tag    : 'div',\n      attrs  : {\n        class: 'easywyg-substrate'\n      },\n    };\n  }\n\n  get type() {\n    return 'substrate'\n  }\n}\n","// Entity abstract class\n// Note: this class cannot be instantiated directly\nexport default class {\n  constructor(container = null) {\n    this.container = container;\n    this.node      = null;\n    this.modified  = false;\n    this.deleted   = false;\n    this.index     = null;\n    this.mutable   = true;\n    this.id        = this.identity();\n\n    this.opts = {\n      attrs: {}\n    };\n  }\n\n  // Указываем ссылку на элемент, вставленный в DOM\n  sync(node) {\n    if (node) {\n      this.node = node;\n      this.node.easywygEntity = this;\n    } else {\n      delete this.node.easywygEntity;\n      delete this.node;\n    }\n\n    this.modified = false;\n  }\n\n  isSynced() {\n    return this.node != null\n  }\n\n  get attrs() {\n    return this.opts.attrs\n  }\n\n  // Тип сущности\n  get type() {\n    return null\n  }\n\n  identity() {\n    return Math.random().toString(36).slice(2);\n  }\n\n  // Entity должно уметь рендерить себя\n  // Этот метод должен вызывать метод render() у соответствующего View\n  // Рендерим только тогда, когда modified == true\n  render() {\n    if (this.modified == true) {\n      this.modified = false;\n      return this.view.render(this);\n    } else {\n      return null;\n    }\n  }\n}\n","import ParagraphEntity from './entities/paragraph.es6';\nimport ImageEntity from './entities/image.es6';\nimport GridEntity from './entities/grid.es6';\nimport GridColumnEntity from './entities/grid_column.es6';\nimport SubstrateEntity from './entities/substrate.es6';\nimport RootContainerEntity from './entities/root_container.es6';\n\nexport default {\n  Paragraph     : ParagraphEntity,\n  Image         : ImageEntity,\n  Grid          : GridEntity,\n  Substrate     : SubstrateEntity,\n  RootContainer : RootContainerEntity,\n  GridColumn    : GridColumnEntity\n};\n","Element.prototype.appendBefore = function(element) {\n  return element.parentNode.insertBefore(this, element);\n}, false;\n\nElement.prototype.appendAfter = function(element) {\n  return element.parentNode.insertBefore(this, element.nextSibling);\n}, false;\n\nObject.defineProperty(Object.prototype, \"merge\", {\n  enumerable: false,\n  value: function(from) {\n    var props = Object.getOwnPropertyNames(from);\n    var dest = this;\n\n    props.forEach(function(name) {\n      if (name in dest) {\n        var destination = Object.getOwnPropertyDescriptor(from, name);\n        Object.defineProperty(dest, name, destination);\n      }\n    });\n    return this;\n  }\n});\n\nObject.defineProperty(Object.prototype, \"clone\", {\n  enumerable: false,\n  value: function() {\n    return this.merge({})\n  }\n});\n\nString.prototype.capitalize = function() {\n  return this.charAt(0).toUpperCase() + this.slice(1);\n}\n","// Operation abstract class\n// Note: this class cannot be instantiated directly\nexport default class {\n  constructor() {\n    // Операция может откатываться?\n    this.reversible = true;\n  }\n\n  // Выполняет команду. Этим меняет массив Entities\n  execute() {\n    throw new Error('Should be implemented')\n  }\n\n  // Откат команды. Выполняет действие, противоположное execute.\n  reverse() {\n    throw new Error('Should be implemented')\n  }\n\n  get type() {\n    throw new Error('Should be implemented')\n  }\n}\n","// Operations\nimport InsertOperation from './operations/insert.es6';\nimport UpdateOperation from './operations/update.es6';\nimport ReplaceOperation from './operations/replace.es6';\nimport MoveOperation from './operations/move.es6';\nimport DeleteOperation from './operations/delete.es6';\nimport SelectOperation from './operations/select.es6';\nimport TransferOperation from './operations/transfer.es6';\nimport UndoOperation from './operations/undo.es6';\n\nexport default {\n  Insert   : InsertOperation,\n  Update   : UpdateOperation,\n  Replace  : ReplaceOperation,\n  Move     : MoveOperation,\n  Delete   : DeleteOperation,\n  Select   : SelectOperation,\n  Transfer : TransferOperation,\n  Undo     : UndoOperation\n};\n","import Operation from '../operation.es6';\nimport InsertOperation from '../operations/insert.es6';\n\n// A Delete Operation\nexport default class extends Operation {\n  constructor(entity) {\n    super();\n\n    this.entity = entity;\n  }\n\n  get type() {\n    return 'delete'\n  }\n\n  // Удалить указанный entity\n  execute(entities) {\n    if (this.reversible) {\n      this.deletedEntity = entity.clone(); // Clone\n    }\n\n    entities.entities.splice(this.entity.index, 1);\n\n    // Обновляем индекс у всех entities\n    entities.entities.map((entity, index) => {\n      entity.index = index;\n    })\n\n    this.entity.modified = true;\n    this.entity.index = null;\n\n    // Помечена как удаленная. entity.render должен удалить такую помеченную сущность\n    this.entity.deleted = true;\n\n    return entities.render();\n  }\n\n  reverse(entities) {\n    // Если операция помечена как неоткатываемая, выходим\n    if (!this.reversible) {\n      return false;\n    }\n\n    const operation = new InsertOperation(\n      entityName, this.deletedEntity.opts, this.deletedEntity.container\n    );\n\n    return operation.execute(entities);\n  }\n}\n","import Operation from '../operation.es6';\nimport TransferOperation from '../operations/transfer.es6';\nimport DeleteOperation from '../operations/delete.es6';\nimport EntityMap from '../entity_map.es6';\n\n// A Insert Operation\nexport default class extends Operation {\n  constructor(entityName, opts, container) {\n    super();\n\n    this.entityName = entityName;\n    this.opts = opts;\n    this.container = container;\n\n    // Созданный entity\n    this.insertedEntity = null;\n\n    // При инициализации операции нужно назначать ей ID\n  }\n\n  get type() {\n    return 'insert'\n  }\n\n  execute(entities) {\n    const klass = EntityMap[this.entityName];\n    let entity;\n\n    try {\n      entity = new klass;\n    } catch (e) {\n      if (e.name == 'TypeError') {\n        throw new Error(`Incorrect entity name ${this.entityName}!`)\n      }\n    }\n\n    const length = entities.entities.push(entity);\n\n    entity.opts.merge(this.opts);\n    entity.index = length;\n    entity.modified = true;\n    entities.render();\n\n    // Вставка в контейнер\n    const transfer = new TransferOperation(entity, this.container);\n    transfer.execute(entities);\n\n    // Записываем данные для отката операции\n    if (this.reversible) {\n      this.insertedEntity = entity; // Clone\n    }\n\n    return entity;\n  }\n\n  // Чтобы выполнить противоположное действие, команда должна\n  // знать, что было сделано.\n  // Здесь есть фишка. Выполняемая команда в методе reverse не должна\n  // записывать данные внутри себя для отката команды, иначе будет бесконечный цикл.\n  // Нужен какой-то флаг, который пометит вновь созданную операцию как неоткатываемую.\n  reverse(entities) {\n    // Если операция помечена как неоткатываемая, выходим\n    if (!this.reversible) {\n      return false;\n    }\n\n    const operation = new DeleteOperation(this.insertedEntity);\n\n    // Данные для отката операции нужно запоминать во время вополнения метода execute.\n    operation.reversible = false;\n    return operation.execute(entities);\n  }\n}\n","import Operation from '../operation.es6';\n\n// A Move Operation\nexport default class extends Operation {\n  constructor(entity, anotherEntity = null, pos = 'after') {\n    super();\n\n    this.entity = entity;\n    this.anotherEntity = anotherEntity;\n  }\n\n  get type() {\n    return 'move'\n  }\n\n  // Переместить entity после anotherEntity.\n  // Если anotherEntity не указан (null), то entity будет перемещен\n  // в самое начало списка entities.\n  execute(entities) {\n    if (this.anotherEntity == null) {\n      entities.entities.splice(0, 0, this.entity);\n    } else {\n      entities.entities.splice(this.anotherEntity.index, 0, this.entity);\n    }\n\n    // Переносим ноду\n    this.entity.node.appendAfter(this.anotherEntity.node)\n\n    // Обновляем индекс у всех entities\n    entities.entities.map((entity, index) => {\n      entity.index = index;\n    })\n\n    this.entity.modified = true;\n\n    // Нужно ли пеперендеривать?\n    return entities.render();\n  }\n}\n","import Operation from '../operation.es6';\n\n// A Replace Operation\nexport default class extends Operation {\n  constructor(entity, anotherEntity) {\n    super();\n\n    this.entity = entity;\n    this.anotherEntity = anotherEntity;\n  }\n\n  get type() {\n    return 'replace'\n  }\n\n  // Заменить указанный entity на anotherEntity.\n  // В данном случае, anotherEntity не должен быть вставлен в DOM.\n  execute(entities) {\n    entities.entities[this.entity.index] = this.anotherEntity;\n    this.anotherEntity.modified = true;\n    this.anotherEntity.index = this.entity.index;\n\n    //this.el.parentNode.replaceChild(otherEntity.view.el, this.el);\n\n    return entities.render();\n  }\n}\n","import Operation from '../operation.es6';\n\n// A Select Operation\nexport default class extends Operation {\n  constructor() {\n    super();\n  }\n\n  get type() {\n    return 'select'\n  }\n}\n","import Operation from '../operation.es6';\n\n// A Transfer Operation\nexport default class extends Operation {\n  constructor(entity, container) {\n    super();\n\n    this.entity = entity;\n    this.container = container;\n  }\n\n  get type() {\n    return 'transfer'\n  }\n\n  execute(entities) {\n    if (this.entity.type == 'root_container') {\n      this.entity.sync(this.container);\n    } else {\n      //console.log(this.container, this.entity)\n      this.entity.sync(this.container.appendChild(this.entity.view.el));\n    }\n\n    return entities.render();\n  }\n}\n","import Operation from '../operation.es6';\n\n// A Undo Operation\nexport default class extends Operation {\n  constructor() {\n    super();\n  }\n\n  get type() {\n    return 'undo'\n  }\n}\n","import Operation from '../operation.es6';\n\n// A Update Operation\nexport default class extends Operation {\n  constructor(entity, opts) {\n    super();\n\n    this.entity = entity;\n    this.opts = opts;\n  }\n\n  get type() {\n    return 'update'\n  }\n\n  // Обновить указанный entity\n  execute(entities) {\n    this.entity.opts.merge(this.opts);\n    this.entity.modified = true;\n\n    return entities.render();\n  }\n}\n","import SerializerMap from './serializer_map.es6';\n\n// Serialize entities to JSON\n// Фабрика. Создает инстанс сериалайзера.\nexport default (operation) => {\n  const type  = operation.type.capitalize();\n  const klass = SerializerMap[type];\n\n  return new klass(operation);\n}\n","// Serializer Abstract class\nexport default class {\n  constructor(operation) {\n    this.operation = operation;\n  }\n\n  serialize() {\n    throw new Error('Should be implemented')\n  }\n}\n","// Serializers\nimport InsertSerializer from './serializers/insert.es6';\nimport UpdateSerializer from './serializers/update.es6';\nimport ReplaceSerializer from './serializers/replace.es6';\nimport MoveSerializer from './serializers/move.es6';\nimport DeleteSerializer from './serializers/delete.es6';\nimport SelectSerializer from './serializers/select.es6';\nimport TransferSerializer from './serializers/transfer.es6';\nimport UndoSerializer from './serializers/undo.es6';\n\nexport default {\n  Insert   : InsertSerializer,\n  Update   : UpdateSerializer,\n  Replace  : ReplaceSerializer,\n  Move     : MoveSerializer,\n  Delete   : DeleteSerializer,\n  Select   : SelectSerializer,\n  Transfer : TransferSerializer,\n  Undo     : UndoSerializer\n};\n","import Serializer from '../serializer.es6'\n\n// Delete Serializer\nexport default class extends Serializer {\n  // Return JSON\n  serialize() {\n\n  }\n}\n","import Serializer from '../serializer.es6'\n\n// Insert Serializer\nexport default class extends Serializer {\n  // Return JSON\n  serialize() {\n    let containerId = null;\n\n    if (this.operation.entityName != \"RootContainer\") {\n      containerId = this.operation.container.id;\n    }\n\n    console.log(this.operation);\n\n    return {\n      type: 'Insert',\n      id: 'zzz',\n      entity: this.operation.entityName,\n      containerId: containerId,\n      opts: this.operation.opts\n    }\n  }\n}\n","import Serializer from '../serializer.es6'\n\n// Move Serializer\nexport default class extends Serializer {\n  // Return JSON\n  serialize() {\n    return {\n      type: 'Move',\n      id: '',\n      entityId: '',\n      afterEntityId: ''\n    }\n  }\n}\n","import Serializer from '../serializer.es6'\n\n// Replace Serializer\nexport default class extends Serializer {\n  // Return JSON\n  serialize() {\n\n  }\n}\n","import Serializer from '../serializer.es6'\n\n// Select Serializer\nexport default class extends Serializer {\n  // Return JSON\n  serialize() {\n\n  }\n}\n","import Serializer from '../serializer.es6'\n\n// Transfer Serializer\nexport default class extends Serializer {\n  // Return JSON\n  serialize() {\n    return {\n      type: 'Transfer',\n      id: '',\n      containerId: '',\n      opts: this.operation.opts\n    }\n  }\n}\n","import Serializer from '../serializer.es6'\n\n// Undo Serializer\nexport default class extends Serializer {\n  // Return JSON\n  serialize() {\n\n  }\n}\n","import Serializer from '../serializer.es6'\n\n// Update Serializer\nexport default class extends Serializer {\n  // Return JSON\n  serialize() {\n    return {\n      type: 'Update',\n      id: '',\n      entityId: '',\n      opts: this.operation.opts\n    }\n  }\n}\n","export default class {\n  constructor() {\n    console.log('yay');\n  }\n\n  render() {\n    // ...\n  }\n}\n","import {diff, patch, create} from 'virtual-dom';\nimport {VNode, VText} from 'virtual-dom';\n\n// View abstract class\n// Note: this class cannot be instantiated directly\nexport default class {\n  constructor() {\n    this.el  = null; // Element\n    this.vel = null; // Virtual element\n  }\n\n  vnode(...args) {\n    return new VNode(...args);\n  }\n\n  vtext(...args) {\n    return new VText(...args);\n  }\n\n  render(entity) {\n    if (entity.deleted) {\n      entity.sync(undefined);\n      this.el.parentNode.removeChild(this.el);\n      return null;\n    }\n\n    // Обновляем вставленную ноду\n    if (entity.isSynced()) {\n      let newVNode = this.build(entity);\n      this.el = patch(this.el, diff(this.vel, newVNode));\n      this.vel = newVNode;\n    }\n    // Вставляем ноду впервые\n    // На самом деле тут она просто создается, а втавляется в Entities.\n    else {\n      this.vel = this.build(entity);\n      this.el = create(this.vel);\n    }\n\n    // Обновляем ссылку на элемент DOM\n    entity.sync(this.el);\n\n    return this.el;\n  }\n}\n","import View from '../view.es6';\n//import Container from '../container.es6';\n\n// A Grid View\nexport default class extends View {\n  build(entity) {\n    //let columns = [];\n\n    /*entity.containers.forEach((container) => {\n      const column = container.view.build(container);\n      columns.push(column);\n\n      // TODO: После рендеринга column должен обновляться columnEntry,\n      // ему должна ставиться ссылка на узел DOM\n    });*/\n\n    return this.vnode('div', { attributes: entity.attrs }, []);\n  }\n}\n","import View from '../view.es6';\n\n// A Grid Column View\nexport default class extends View {\n  build(entity) {\n    return this.vnode(entity.tag, { attributes: entity.attrs });\n  }\n}\n","import View from '../view.es6';\n\n// A Image View\nexport default class extends View {\n  build(entity) {\n    let img = this.vnode('img', { attributes: entity.attrs.img });\n\n    if (entity.attrs.a.href) {\n      img = this.vnode('a', { attributes: entity.attrs.a }, [img]);\n    }\n\n    const caption = this.vnode('figcaption', { attributes: entity.attrs.figcaption }, [\n      this.vtext(entity.caption)\n    ]);\n\n    return this.vnode('figure', { attributes: { class: 'fuckyaz' } }, [img, caption])\n  }\n}\n","import View from '../view.es6';\n\n// A Paragraph View\n// Этот класс знает, как рендерить ParagraphEntity\n// когда нужно обновлять DOM.\nexport default class extends View {\n  build(entity) {\n    return this.vnode(entity.tag, {}, [\n      this.vtext(entity.text)\n    ])\n  }\n}\n","import View from '../view.es6';\n\n// A Root Container View\nexport default class extends View {\n  render(entity) {\n    // Nothing to do here\n    return null;\n  }\n}\n","import View from '../view.es6';\n\n// A Substrate View\nexport default class extends View {\n  build(entity) {\n    return this.vnode(entity.tag, { attributes: entity.attrs });\n  }\n}\n"]}